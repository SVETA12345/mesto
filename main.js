(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var n,r;return n=e,(r=[{key:"openPopup",value:function(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"setEventListeners",value:function(){var e=this;this._popupSelector.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.closePopup(),t.target.classList.contains("popup__close")&&e.closePopup()}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},i.apply(this,arguments)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,n,c,l,s=(c=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(c);if(l){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e))._popupPhoto=document.querySelector(".popup__photo"),t._popupPhotoSubtitle=document.querySelector(".popup__subtitle"),t}return t=f,(n=[{key:"openPopup",value:function(e,t){this._popupPhoto.src=t,this._popupPhoto.alt=e,this._popupPhotoSubtitle.textContent=e,i(a(f.prototype),"openPopup",this).call(this)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n),l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var p=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apiLikeDlete=r,this._apiLikeAdd=n,this._data=t,this._name=t.name,this._image=t.link,this._handleCardClick=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return"f497e1c825cc1aeec8db23f3"==this._data.owner._id?this._templateSelector=".template_my_card":this._templateSelector=".template_user",document.querySelector(this._templateSelector).content.querySelector(".place").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".place__photo"),this._setEventListeners(),this._cardImage.src=this._image,this._cardImage.alt=this._name,this._element.querySelector(".place__title").textContent=this._name,this._element.querySelector(".place__subtitle").textContent=this._data.likes.length,this.renderLike(this._element),this._element}},{key:"_isMyLike",value:function(e){var t=!1;console.log(e.likes);for(var n=0;n<e.likes.length;n++)if(console.log(t),"f497e1c825cc1aeec8db23f3"==e.likes[n]._id){t=!0;break}return t}},{key:"renderLike",value:function(e){var t=this._isMyLike(this._data);this._element=e,t?this._element.querySelector(".place__like").classList.add("place__like_active"):this._element.querySelector(".place__like").classList.remove("place__like_active")}},{key:"toggleLike",value:function(){return this._isMyLike(this._data)?this._apiLikeDlete(this._data._id):this._apiLikeAdd(this._data._id)}},{key:"clickLike",value:function(e,t,n,r){return this._countLikes=r,t.target.classList.toggle("place__like_active"),2==t.target.className.split(" ").length?(n.querySelector(".place__subtitle").textContent=this._countLikes+1,this._countLikes=this._countLikes+1):(n.querySelector(".place__subtitle").textContent=this._countLikes-1,this._countLikes-=1),this._countLikes}},{key:"_setEventListeners",value:function(){var e=this;this._cardImage.addEventListener("click",(function(){e._handleCardClick()}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}var h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formsConfig=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._formsConfig.inputSelector)),this._btnSaveElement=this._formElement.querySelector(this._formsConfig.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_inputValid",value:function(e){e.validity.valid?this._hideInputError(e):(this._showInputError(e,e.validationMessage),this._disableButton())}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this;this._disableButton(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._inputValid(t),e._inputList.every((function(e){return e.validity.valid}))&&e._enableButton()}))}))}},{key:"_showInputError",value:function(e,t){var n=document.querySelector(".".concat(e.id,"-error"));e.classList.add(this._formsConfig.inputErrorClass),n.textContent=t,n.classList.add(this._formsConfig.errorClass)}},{key:"_disableButton",value:function(){this._btnSaveElement.classList.add(this._formsConfig.inactiveButtonClass),this._btnSaveElement.setAttribute("disabled","disabled")}},{key:"_enableButton",value:function(){this._btnSaveElement.classList.remove(this._formsConfig.inactiveButtonClass),this._btnSaveElement.removeAttribute("disabled")}},{key:"_hideInputError",value:function(e){var t=document.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._formsConfig.inputErrorClass),t.textContent="",t.classList.remove(this._formsConfig.errorClass)}},{key:"resetValidation",value:function(){var e=this;this._disableButton(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}var v=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.reverse().forEach((function(t){e._renderer(t)}))}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n,r=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormSubmit=r,n._popupSaveBtn=document.querySelector(".popup__button"),n._inputList=n._popupSelector.querySelectorAll(".popup__input"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"_close",value:function(e){g(w(u.prototype),"closePopup",this).call(this),e.target.reset()}},{key:"setBtnText",value:function(e){this._popupSaveBtn.textContent=e}},{key:"setEventListeners",value:function(){var e=this;this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e._close(t)})),g(w(u.prototype),"setEventListeners",this).call(this)}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}var O=function(){function e(t){var n=t.selectorName,r=t.selectorJob;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameProfile=document.querySelector(n),this._jobProfile=document.querySelector(r)}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){return{name:this._nameProfile.textContent,job:this._jobProfile.textContent}}},{key:"setUserInfo",value:function(e,t){console.log(t.sendDataProfile(e.name,e.job)),t.sendDataProfile(e.name,e.job),this._nameProfile.textContent=e.name,this._jobProfile.textContent=e.job}}],n&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,n=[{key:"getAllTasks",value:function(){return fetch(this._url,{method:"GET",headers:this._headers}).then((function(e){if(e.ok)return e.json()}))}},{key:"sendDataProfile",value:function(e,t){return fetch(this._url,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.json()}))}},{key:"createMestoCard",value:function(e,t){return fetch(this._url,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.json()}))}},{key:"deleteCard",value:function(){return fetch(this._url,{method:"DELETE",headers:this._headers}).then((function(e){if(e.ok)return e.json()}))}},{key:"likeAdd",value:function(){return fetch(this._url,{method:"PUT",headers:this._headers}).then((function(e){if(e.ok)return e.json()}))}},{key:"likeDelete",value:function(){return fetch(this._url,{method:"DELETE",headers:this._headers}).then((function(e){if(e.ok)return e.json()}))}},{key:"avatarProfile",value:function(e){return fetch(this._url,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.json()}))}}],n&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===q(o)?o:String(o)),r)}var o}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},R.apply(this,arguments)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.btnYes,r=e.popupSelector,o=e.apiDeleteMyCard;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r))._btnYes=document.querySelector(n),t._apiDeleteMyCard=o,t}return t=u,(n=[{key:"_deleteCard",value:function(){this._cardElement.remove(),this._apiDeleteMyCard(this._cardId),console.log("cardId",this._cardId)}},{key:"_setEventListeners",value:function(){var e=this;R(B(u.prototype),"setEventListeners",this).call(this),this._btnYes.addEventListener("click",(function(t){t.preventDefault(),e._deleteCard(),R(B(u.prototype),"closePopup",e).call(e)}))}},{key:"open",value:function(e,t){R(B(u.prototype),"openPopup",this).call(this),this._cardId=e._id,this._cardElement=t,this._setEventListeners()}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=document.getElementById("button_avatar"),N=document.querySelector(".popup_type_avatar"),z=document.querySelector(".avatar_open_popup"),F=(document.querySelector(".popup__close_theme_card"),document.querySelector(".place__close"),document.querySelector(".popup_type_card")),U=document.querySelector(".popup_type_profile"),J=document.querySelector(".profile__edit"),Y=(document.querySelector(".popup__close"),document.querySelector(".profile__name")),H=document.querySelector(".profile__second-name"),G=(document.querySelector(".form_profile_name"),document.querySelector(".form__name_theme_first")),$=document.querySelector(".form__name_theme_job"),K=document.querySelector(".places"),Q=document.querySelector(".profile__add"),W=new h(l,N),X=new h(l,F),Z=new h(l,U),ee=(new n(".popup_type_close"),new A({btnYes:".popup__close_theme_card",popupSelector:".popup_type_close",apiDeleteMyCard:function(e){new T({url:"https://mesto.nomoreparties.co/v1/cohort-63/cards/".concat(e),headers:{authorization:"1c8d4f00-a15b-43e6-a0ec-40bf4915d387","Content-Type":"application/json"}}).deleteCard()}})),te=new T({url:"https://mesto.nomoreparties.co/v1/cohort-63/cards",headers:{authorization:"1c8d4f00-a15b-43e6-a0ec-40bf4915d387","Content-Type":"application/json"}}),ne=new T({url:"https://mesto.nomoreparties.co/v1/cohort-63/users/me",headers:{authorization:"1c8d4f00-a15b-43e6-a0ec-40bf4915d387","Content-Type":"application/json"}}),re=new T({url:"https://mesto.nomoreparties.co/v1/cohort-63/users/me/avatar",headers:{authorization:"1c8d4f00-a15b-43e6-a0ec-40bf4915d387","Content-Type":"application/json"}});function oe(e){return new T({url:"https://mesto.nomoreparties.co/v1/cohort-63/cards/".concat(e,"/likes"),headers:{authorization:"1c8d4f00-a15b-43e6-a0ec-40bf4915d387","Content-Type":"application/json"}}).likeAdd()}function ie(e){return new T({url:"https://mesto.nomoreparties.co/v1/cohort-63/cards/".concat(e,"/likes"),headers:{authorization:"1c8d4f00-a15b-43e6-a0ec-40bf4915d387","Content-Type":"application/json"}}).likeDelete()}var ue=te.getAllTasks();ne.getAllTasks().then((function(e){Y.textContent=e.name,H.textContent=e.about})),ue.then((function(e){var t=new v({data:e,renderer:function(e){if("f497e1c825cc1aeec8db23f3"==e.owner._id){var n=D(se(e),2),r=n[0];n[1].addEventListener("click",(function(){ee.open(e,r)})),t.setItem(r)}else{var o=function(e){var t=new p(e,oe,ie,(function(){le.openPopup(e.name,e.link)})),n=t.generateCard(),r=e.likes.length;return n.querySelector(".place__like").addEventListener("click",(function(e){t.toggleLike().then((function(o){r=t.clickLike(o,e,n,r)}))})),n}(e);t.setItem(o)}}},".places");t.renderItems()})),ne.getAllTasks().then((function(e){M.style.backgroundImage="url(".concat(e.avatar,")"),M.style.backgroundRepeat="no-repeat"}));var ae=new O({selectorName:".profile__name",selectorJob:".profile__second-name"}),ce=new P(".popup_type_profile",{handleFormSubmit:function(e){return ae.setUserInfo(e,ne)}}),le=new c(".popup_type_image");function se(e){var t=new p(e,oe,ie,(function(){le.openPopup(e.name,e.link)})),n=t.generateCard(),r=e.likes.length;n.querySelector(".place__like").addEventListener("click",(function(e){t.toggleLike().then((function(o){r=t.clickLike(o,e,n,r)}))}));var o=n.querySelector(".place__close");return[n,o]}J.addEventListener("click",(function(){var e=ae.getUserInfo();G.value=e.name,$.value=e.job,ce.openPopup(),Z.resetValidation()}));var fe=new P(".popup_type_card",{handleFormSubmit:function(e){return function(e){var t=te.createMestoCard(e.name,e.link);fe.setBtnText("Сохранение..."),t.then((function(e){var t=D(se(e),2),n=t[0],r=t[1];K.prepend(n),r.addEventListener("click",(function(){ee.open(e,n)}))})).catch((function(e){return console.log(e)})).finally(fe.setBtnText("Создать"))}(e)}}),pe=new P(".popup_type_avatar",{handleFormSubmit:function(e){return function(e){pe.setBtnText("Сохранение...");var t=re.avatarProfile(e.link);console.log(t),t.then((function(e){M.style.backgroundImage="url(".concat(e.avatar,")"),M.style.backgroundRepeat="no-repeat"})).catch((function(e){return console.log(e)})).finally(pe.setBtnText("Сохранить"))}(e)}});Q.addEventListener("click",(function(){X.resetValidation(),fe.openPopup()})),z.addEventListener("click",(function(){W.resetValidation(),pe.openPopup()})),fe.setEventListeners(),X.enableValidation(),pe.setEventListeners(),W.enableValidation(),Z.enableValidation(),ce.setEventListeners(),le.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUssSUFFL0NpSixHQUFZLElBQUl0RyxFQUFjLHFCQUFxQixDQUN2REMsaUJBQWtCLFNBQUM1QyxHQUFJLE9BdEZ6QixTQUFtQkEsR0FDakJpSixHQUFXTixXQUFXLGlCQUN0QixJQUFNTyxFQUFRdkMsR0FBVXdDLGNBQWNuSixFQUFLM0MsTUFDM0NzQyxRQUFRQyxJQUFJc0osR0FDWkEsRUFBUTNFLE1BQUssU0FBQ3ZFLEdBQ1p3RixFQUFhc0MsTUFBTUMsZ0JBQWtCLE9BQUhsRyxPQUFVN0IsRUFBSytFLE9BQU0sS0FDdkRTLEVBQWFzQyxNQUFNRSxpQkFBbUIsV0FDeEMsSUFBR2EsT0FBTSxTQUFDQyxHQUFHLE9BQUduSixRQUFRQyxJQUFJa0osRUFBSSxJQUMvQkMsUUFBUUUsR0FBV04sV0FBVyxhQUNqQyxDQTZFOEJTLENBQVVwSixFQUFLLElBRTdDa0csRUFBYTdKLGlCQUFpQixTQUFTLFdBQ3JDK0osRUFBV21DLGtCQUNYQyxHQUFVaEIsV0FDWixJQUNBN0IsRUFBY3RKLGlCQUFpQixTQUFRLFdBQ3JDOEosRUFBWW9DLGtCQUNaVSxHQUFXekIsV0FDYixJQUNBZ0IsR0FBVWEsb0JBQ1ZqRCxFQUFXa0QsbUJBQ1hMLEdBQVdJLG9CQUVYbEQsRUFBWW1ELG1CQUNaakQsRUFBYWlELG1CQUdicEIsR0FBWW1CLG9CQUdaOUIsR0FBZThCLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJha3Rpa3VtLy4vc3JjL3NjcmlwdHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJha3Rpa3VtLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJha3Rpa3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFrdGlrdW0vLi9zcmMvc2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWt0aWt1bS8uL3NyYy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJha3Rpa3VtLy4vc3JjL3NjcmlwdHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFrdGlrdW0vLi9zcmMvc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWt0aWt1bS8uL3NyYy9zY3JpcHRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWt0aWt1bS8uL3NyYy9zY3JpcHRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFrdGlrdW0vLi9zcmMvc2NyaXB0cy9Qb3B1cFdpdGhEZWxldGVDYXJkLmpzIiwid2VicGFjazovL3ByYWt0aWt1bS8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgUG9wdXB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3RvcilcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKVxyXG4gIH1cclxuICBvcGVuUG9wdXAoKXtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2VQb3B1cCgpe1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCl7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHsgIFxyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKVxyXG4gIH1cclxuICB9XHJcblxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KT0+e1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKClcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKClcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG89IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3Bob3RvXCIpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG9TdWJ0aXRsZT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VidGl0bGVcIik7XHJcbiAgICAgIH1cclxuICAgICAgb3BlblBvcHVwKG5hbWUsbGluayl7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBQaG90by5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG8uYWx0ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9wb3B1cFBob3RvU3VidGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW5Qb3B1cCgpXHJcbiAgICAgIH1cclxuICAgIFxyXG59IiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCLQkNGA0YXRi9C3XCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGdcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwi0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjFwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcItCY0LLQsNC90L7QstC+XCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcItCa0LDQvNGH0LDRgtC60LBcIixcclxuICAgICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCLQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcItCR0LDQudC60LDQu1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnXCIsXHJcbiAgICB9LFxyXG4gIF07XHJcbiAgZXhwb3J0IGNvbnN0IGZvcm1zQ29uZmlnPXtcclxuICAgIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICAgIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcclxuICB9IiwiXHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLGFwaUxpa2VBZGQsYXBpTGlrZURsZXRlLGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fYXBpTGlrZURsZXRlPWFwaUxpa2VEbGV0ZVxyXG4gICAgdGhpcy5fYXBpTGlrZUFkZD1hcGlMaWtlQWRkXHJcbiAgICB0aGlzLl9kYXRhPWRhdGFcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZSA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2RhdGEub3duZXIuX2lkPT0nZjQ5N2UxYzgyNWNjMWFlZWM4ZGIyM2YzJyl7XHJcbiAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3I9Jy50ZW1wbGF0ZV9teV9jYXJkJ1xyXG4gICAgfVxyXG4gICAgZWxzZSB7IHRoaXMuX3RlbXBsYXRlU2VsZWN0b3I9Jy50ZW1wbGF0ZV91c2VyJ31cclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZVwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX3Bob3RvXCIpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VfX3N1YnRpdGxlXCIpLnRleHRDb250ZW50PXRoaXMuX2RhdGEubGlrZXMubGVuZ3RoXHJcbiAgICB0aGlzLnJlbmRlckxpa2UodGhpcy5fZWxlbWVudClcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuICBfaXNNeUxpa2UoZGF0YSl7XHJcbiAgICBsZXQgaXNNeUxpa2U9ZmFsc2VcclxuICAgIGNvbnNvbGUubG9nKGRhdGEubGlrZXMpXHJcbiAgICBmb3IgKGxldCBpPTA7IGk8ZGF0YS5saWtlcy5sZW5ndGg7aSsrKXtcclxuICAgICAgY29uc29sZS5sb2coaXNNeUxpa2UpXHJcbiAgICAgIGlmIChkYXRhLmxpa2VzW2ldLl9pZD09J2Y0OTdlMWM4MjVjYzFhZWVjOGRiMjNmMycpe1xyXG4gICAgICAgIGlzTXlMaWtlPXRydWVcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXNNeUxpa2VcclxuICB9XHJcbiAgcmVuZGVyTGlrZShjYXJkRWxlbWVudCl7XHJcbiAgICBsZXQgaXNNeUxpa2U9dGhpcy5faXNNeUxpa2UodGhpcy5fZGF0YSlcclxuICAgIHRoaXMuX2VsZW1lbnQ9Y2FyZEVsZW1lbnRcclxuICAgIGlmIChpc015TGlrZSl7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlX19saWtlJykuY2xhc3NMaXN0LmFkZChcInBsYWNlX19saWtlX2FjdGl2ZVwiKTt9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZScpLmNsYXNzTGlzdC5yZW1vdmUoXCJwbGFjZV9fbGlrZV9hY3RpdmVcIik7XHJcbiAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgfVxyXG4gIHRvZ2dsZUxpa2UoKSB7XHJcbiAgICBsZXQgaXNNeUxpa2U9dGhpcy5faXNNeUxpa2UodGhpcy5fZGF0YSlcclxuICAgIGlmIChpc015TGlrZSl7XHJcbiAgICByZXR1cm4gdGhpcy5fYXBpTGlrZURsZXRlKHRoaXMuX2RhdGEuX2lkKVxyXG4gICAgfVxyXG4gICAgZWxzZXtyZXR1cm4gdGhpcy5fYXBpTGlrZUFkZCh0aGlzLl9kYXRhLl9pZCl9XHJcbiAgfVxyXG4gIGNsaWNrTGlrZShpdGVtLGV2dCxjYXJkRWxlbWVudCxjb3VudExpa2VzKXtcclxuICAgIHRoaXMuX2NvdW50TGlrZXM9Y291bnRMaWtlc1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwicGxhY2VfX2xpa2VfYWN0aXZlXCIpXHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc05hbWUuc3BsaXQoJyAnKS5sZW5ndGg9PTIpe1xyXG4gICAgICBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX3N1YnRpdGxlJykudGV4dENvbnRlbnQ9dGhpcy5fY291bnRMaWtlcysxXHJcbiAgICAgIHRoaXMuX2NvdW50TGlrZXM9dGhpcy5fY291bnRMaWtlcysxXHJcbiAgICB9XHJcbiAgICBlbHNle2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fc3VidGl0bGUnKS50ZXh0Q29udGVudD10aGlzLl9jb3VudExpa2VzLTFcclxuICAgIHRoaXMuX2NvdW50TGlrZXMtPTFcclxuICB9XHJcbiAgcmV0dXJuIHRoaXMuX2NvdW50TGlrZXNcclxuICB9XHJcbiBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3Jtc0NvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1zQ29uZmlnID0gZm9ybXNDb25maWc7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3Jtc0NvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J0blNhdmVFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fZm9ybXNDb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG4gIF9pbnB1dFZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9pbnB1dFZhbGlkKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgY29uc3QgZm9ybUlzVmFsaWQgPSB0aGlzLl9pbnB1dExpc3QuZXZlcnkoXHJcbiAgICAgICAgICAoeyB2YWxpZGl0eSB9KSA9PiB2YWxpZGl0eS52YWxpZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKGZvcm1Jc1ZhbGlkKSB7XHJcbiAgICAgICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZm9ybXNDb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Zvcm1zQ29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J0blNhdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZm9ybXNDb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idG5TYXZlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xyXG4gIH1cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnRuU2F2ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgdGhpcy5fZm9ybXNDb25maWcuaW5hY3RpdmVCdXR0b25DbGFzc1xyXG4gICAgKTtcclxuICAgIHRoaXMuX2J0blNhdmVFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gIH1cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9mb3Jtc0NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Zvcm1zQ29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3Ioe2RhdGEscmVuZGVyZXJ9LGNvbnRhaW5lclNlbGVjdG9yKXtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zPWRhdGE7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXI9cmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpXHJcbiAgICB9XHJcbiAgICByZW5kZXJJdGVtcygpe1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pPT57XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzZXRJdGVtKGVsZW1lbnQpe1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fcG9wdXBTYXZlQnRuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJylcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIC8vINGB0L7Qt9C00LDRkdC8INC/0YPRgdGC0L7QuSDQvtCx0YrQtdC60YJcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICAvLyDQtNC+0LHQsNCy0LvRj9C10Lwg0LIg0Y3RgtC+0YIg0L7QsdGK0LXQutGCINC30L3QsNGH0LXQvdC40Y8g0LLRgdC10YUg0L/QvtC70LXQuVxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC+0LHRitC10LrRgiDQt9C90LDRh9C10L3QuNC5XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcbiAgX2Nsb3NlKGV2dCkge1xyXG4gICAgc3VwZXIuY2xvc2VQb3B1cCgpO1xyXG4gICAgZXZ0LnRhcmdldC5yZXNldCgpO1xyXG4gIH1cclxuICBzZXRCdG5UZXh0KHRleHQpe1xyXG4gICAgdGhpcy5fcG9wdXBTYXZlQnRuLnRleHRDb250ZW50PXRleHRcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgLy8g0LTQvtCx0LDQstC40Lwg0LLRi9C30L7QsiDRhNGD0L3QutGG0LjQuCBfaGFuZGxlRm9ybVN1Ym1pdFxyXG4gICAgICAvLyDQv9C10YDQtdC00LDQtNC40Lwg0LXQuSDQvtCx0YrQtdC60YIg4oCUINGA0LXQt9GD0LvRjNGC0LDRgiDRgNCw0LHQvtGC0YsgX2dldElucHV0VmFsdWVzXHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuX2Nsb3NlKGV2dCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4vQXBpXCI7XHJcbmV4cG9ydCBjbGFzcyBVc2VySW5mb3tcclxuICAgIGNvbnN0cnVjdG9yKHtzZWxlY3Rvck5hbWUsc2VsZWN0b3JKb2J9KXtcclxuXHJcbiAgICAgICAgdGhpcy5fbmFtZVByb2ZpbGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvck5hbWUpXHJcbiAgICAgICAgdGhpcy5fam9iUHJvZmlsZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ySm9iKVxyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8oKXtcclxuICAgICAgICByZXR1cm57bmFtZTp0aGlzLl9uYW1lUHJvZmlsZS50ZXh0Q29udGVudCxqb2I6dGhpcy5fam9iUHJvZmlsZS50ZXh0Q29udGVudH1cclxuICAgIH1cclxuICAgIHNldFVzZXJJbmZvKGl0ZW0sYXBpKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhhcGkuc2VuZERhdGFQcm9maWxlKGl0ZW0ubmFtZSxpdGVtLmpvYikpXHJcbiAgICAgICAgYXBpLnNlbmREYXRhUHJvZmlsZShpdGVtLm5hbWUsaXRlbS5qb2IpXHJcbiAgICAgICAgdGhpcy5fbmFtZVByb2ZpbGUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fam9iUHJvZmlsZS50ZXh0Q29udGVudCA9IGl0ZW0uam9iO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIEFwaXtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyl7XHJcbiAgICAgICAgdGhpcy5fdXJsPWNvbmZpZy51cmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycz1jb25maWcuaGVhZGVyc1xyXG4gICAgfVxyXG4gICAgZ2V0QWxsVGFza3MoKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDpcIkdFVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOnRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KS50aGVuKChyZXMpPT57XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZW5kRGF0YVByb2ZpbGUobmFtZSxqb2Ipe1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgICBhYm91dDogam9iXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9KS50aGVuKHJlcyA9PiByZXMuanNvbigpKTsgXHJcbiAgICB9XHJcbiAgICBjcmVhdGVNZXN0b0NhcmQobmFtZSxsaW5rKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9KS50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgICAgICAgXHJcbiAgICB9XHJcbiAgICBkZWxldGVDYXJkKCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6XCJERUxFVEVcIixcclxuICAgICAgICAgICAgaGVhZGVyczp0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSkudGhlbigocmVzKT0+e1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIGxpa2VBZGQoKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDpcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOnRoaXMuX2hlYWRlcnMsXHJcblxyXG4gICAgICAgIH0pLnRoZW4oKHJlcyk9PntcclxuICAgICAgICAgICAgaWYgKHJlcy5vayl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBsaWtlRGVsZXRlKCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6XCJERUxFVEVcIixcclxuICAgICAgICAgICAgaGVhZGVyczp0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSkudGhlbigocmVzKT0+e1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIGF2YXRhclByb2ZpbGUobGluayl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICBhdmF0YXI6bGlua1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSkudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7IFxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi9BcGkuanNcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aERlbGV0ZUNhcmQgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioe2J0blllcyxwb3B1cFNlbGVjdG9yLGFwaURlbGV0ZU15Q2FyZH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnRuWWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidG5ZZXMpO1xyXG4gICAgdGhpcy5fYXBpRGVsZXRlTXlDYXJkPWFwaURlbGV0ZU15Q2FyZFxyXG4gICAgXHJcbiAgfVxyXG4gIF9kZWxldGVDYXJkKCl7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKVxyXG4gICAgdGhpcy5fYXBpRGVsZXRlTXlDYXJkKHRoaXMuX2NhcmRJZClcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ2NhcmRJZCcsdGhpcy5fY2FyZElkKVxyXG4gICAgXHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgICB0aGlzLl9idG5ZZXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVDYXJkKClcclxuICAgICAgICBzdXBlci5jbG9zZVBvcHVwKClcclxuICAgICAgfSlcclxuICB9XHJcbiAgb3BlbihpdGVtLGNhcmRFbGVtZW50KXtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpXHJcbiAgICB0aGlzLl9jYXJkSWQ9aXRlbS5faWRcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50PWNhcmRFbGVtZW50XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL3NjcmlwdHMvUG9wdXAuanNcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBmb3Jtc0NvbmZpZyB9IGZyb20gXCIuL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4vc2NyaXB0cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuL3NjcmlwdHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4vc2NyaXB0cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi9zY3JpcHRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1BvcHVwV2l0aERlbGV0ZUNhcmR9IGZyb20gJy4vc2NyaXB0cy9Qb3B1cFdpdGhEZWxldGVDYXJkLmpzJ1xyXG5cclxuY29uc3QgYnV0dG9uQXZhdGFyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2F2YXRhclwiKVxyXG5jb25zdCBwb3B1cEF2YXRhcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hdmF0YXInKVxyXG5jb25zdCBhdmF0YXJCdG5PcGVuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdmF0YXJfb3Blbl9wb3B1cCcpXHJcbmNvbnN0IGJ0blllcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlX3RoZW1lX2NhcmQnKVxyXG5jb25zdCBjYXJkQ2xvc2U9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlX19jbG9zZScpXHJcbmNvbnN0IHBvcHVwTWVzdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfY2FyZFwiKTtcclxuY29uc3QgcG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIik7XHJcbmNvbnN0IGJ0bk9wZW5FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcclxuY29uc3QgY2xvc2VQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XHJcbmNvbnN0IG5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IGpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc2Vjb25kLW5hbWVcIik7XHJcbmNvbnN0IGZvcm1FbGVtZW50UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9wcm9maWxlX25hbWVcIik7XHJcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fbmFtZV90aGVtZV9maXJzdFwiKTtcclxuY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX25hbWVfdGhlbWVfam9iXCIpO1xyXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzXCIpO1xyXG5jb25zdCBtZXN0b0J0bk9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZFwiKTtcclxuY29uc3QgdmFsaWRBdmF0YXI9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1zQ29uZmlnLCBwb3B1cEF2YXRhcik7XHJcbmNvbnN0IHZhbGlkTWVzdG8gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3Jtc0NvbmZpZywgcG9wdXBNZXN0byk7XHJcbmNvbnN0IHZhbGlkUHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1zQ29uZmlnLCBwb3B1cFByb2ZpbGUpO1xyXG5jb25zdCBjbG9zZVBvcHVwPSBuZXcgUG9wdXAoXCIucG9wdXBfdHlwZV9jbG9zZVwiKTtcclxuY29uc3QgY2FyZFBvcHVwRGVsZXRlPSBuZXcgUG9wdXBXaXRoRGVsZXRlQ2FyZCh7YnRuWWVzOicucG9wdXBfX2Nsb3NlX3RoZW1lX2NhcmQnLCBwb3B1cFNlbGVjdG9yOicucG9wdXBfdHlwZV9jbG9zZScsYXBpRGVsZXRlTXlDYXJkfSk7XHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIHVybDonaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02My9jYXJkcycsXHJcbiAgaGVhZGVyczp7IFxyXG4gICAgYXV0aG9yaXphdGlvbjogJzFjOGQ0ZjAwLWExNWItNDNlNi1hMGVjLTQwYmY0OTE1ZDM4NycsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfVxyXG59KVxyXG5jb25zdCBhcGlQcm9maWxlPW5ldyBBcGkoe1xyXG4gIHVybDonaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02My91c2Vycy9tZScsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJzFjOGQ0ZjAwLWExNWItNDNlNi1hMGVjLTQwYmY0OTE1ZDM4NycsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgfSxcclxufSlcclxuXHJcbmNvbnN0IGFwaUF2YXRhcj1uZXcgQXBpKHtcclxuICB1cmw6J2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjMvdXNlcnMvbWUvYXZhdGFyJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnMWM4ZDRmMDAtYTE1Yi00M2U2LWEwZWMtNDBiZjQ5MTVkMzg3JyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICB9XHJcbn0pXHJcblxyXG5cclxuZnVuY3Rpb24gYXBpRGVsZXRlTXlDYXJkKGNhcmRJZCl7XHJcbiAgY29uc3QgYXBpRGVsZXRlQ2FyZD0gbmV3IEFwaSh7XHJcbiAgICB1cmw6YGh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjMvY2FyZHMvJHtjYXJkSWR9YCxcclxuICBoZWFkZXJzOnsgXHJcbiAgICBhdXRob3JpemF0aW9uOiAnMWM4ZDRmMDAtYTE1Yi00M2U2LWEwZWMtNDBiZjQ5MTVkMzg3JyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9XHJcbn0pXHJcbiAgYXBpRGVsZXRlQ2FyZC5kZWxldGVDYXJkKClcclxufVxyXG5cclxuZnVuY3Rpb24gYXBpTGlrZUFkZChjYXJkSWQpe1xyXG4gIGNvbnN0IGFwaUxpa2VBZGQ9IG5ldyBBcGkoe1xyXG4gICAgdXJsOmBodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYzL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsXHJcbiAgaGVhZGVyczp7IFxyXG4gICAgYXV0aG9yaXphdGlvbjogJzFjOGQ0ZjAwLWExNWItNDNlNi1hMGVjLTQwYmY0OTE1ZDM4NycsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfVxyXG59KVxyXG4gIHJldHVybiBhcGlMaWtlQWRkLmxpa2VBZGQoKVxyXG59XHJcbmZ1bmN0aW9uIGFwaUxpa2VEbGV0ZShjYXJkSWQpe1xyXG4gIGNvbnN0IGFwaUxpa2VEZWxldGU9IG5ldyBBcGkoe1xyXG4gICAgdXJsOmBodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYzL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsXHJcbiAgaGVhZGVyczp7IFxyXG4gICAgYXV0aG9yaXphdGlvbjogJzFjOGQ0ZjAwLWExNWItNDNlNi1hMGVjLTQwYmY0OTE1ZDM4NycsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfVxyXG59KVxyXG4gIHJldHVybiBhcGlMaWtlRGVsZXRlLmxpa2VEZWxldGUoKVxyXG59XHJcblxyXG5jb25zdCB0YXNrcz1hcGkuZ2V0QWxsVGFza3MoKVxyXG5jb25zdCBnZXRQcm9maWxlPWFwaVByb2ZpbGUuZ2V0QWxsVGFza3MoKVxyXG5nZXRQcm9maWxlLnRoZW4oKGRhdGEpPT57XHJcbiAgbmFtZS50ZXh0Q29udGVudD1kYXRhLm5hbWU7XHJcbiAgam9iLnRleHRDb250ZW50PWRhdGEuYWJvdXRcclxufSlcclxudGFza3MudGhlbigoZGF0YSkgPT57XHJcbiAgZnVuY3Rpb24gcmVuZGVyZXIoaXRlbSkgeyAgXHJcbiAgICBpZiAoaXRlbS5vd25lci5faWQ9PSdmNDk3ZTFjODI1Y2MxYWVlYzhkYjIzZjMnKXtcclxuICAgICAgY29uc3QgW2NhcmRFbGVtZW50LGNhcmRDbG9zZV0gPSBjcmVhdGVDYXJkTXkoaXRlbSk7XHJcbiAgICAgIGNhcmRDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntjYXJkUG9wdXBEZWxldGUub3BlbihpdGVtLGNhcmRFbGVtZW50KSB9KVxyXG4gICAgICBkZWZhdWx0Q2FyZExpc3Quc2V0SXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmRVc2VyKGl0ZW0pO1xyXG4gICAgICBkZWZhdWx0Q2FyZExpc3Quc2V0SXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcbiAgY29uc3QgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7IGRhdGE6ZGF0YSwgcmVuZGVyZXIgfSxcclxuICAgIFwiLnBsYWNlc1wiXHJcbiAgKTtcclxuICBkZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKVxyXG4gIFxyXG4gIH0pXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcmVyQ2FyZFBvcHVwKGl0ZW0pIHtcclxuICBjb25zdCBhcGlDYXJkPWFwaS5jcmVhdGVNZXN0b0NhcmQoaXRlbS5uYW1lLGl0ZW0ubGluaylcclxuICBmb3JtTWVzdG8uc2V0QnRuVGV4dCgn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKVxyXG4gIGFwaUNhcmQudGhlbigoZGF0YSk9PntcclxuICAgIGNvbnN0IFtjYXJkRWxlbWVudCxjYXJkQ2xvc2VdID0gY3JlYXRlQ2FyZE15KGRhdGEpO1xyXG4gICAgY2FyZHNDb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudClcclxuICAgIGNhcmRDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntjYXJkUG9wdXBEZWxldGUub3BlbihkYXRhLGNhcmRFbGVtZW50KSB9KSAgICAgICAgXHJcbn0pLmNhdGNoKChlcnIpPT5jb25zb2xlLmxvZyhlcnIpKVxyXG4uZmluYWxseShmb3JtTWVzdG8uc2V0QnRuVGV4dCgn0KHQvtC30LTQsNGC0YwnKSlcclxufVxyXG5cclxuY29uc3QgYXBpQXZhdGFyRGVmdWx0PWFwaVByb2ZpbGUuZ2V0QWxsVGFza3MoKVxyXG5hcGlBdmF0YXJEZWZ1bHQudGhlbigocmVzKT0+e1xyXG4gIGJ1dHRvbkF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7cmVzLmF2YXRhcn0pYDtcclxuICAgIGJ1dHRvbkF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJuby1yZXBlYXRcIlxyXG59XHJcbilcclxuZnVuY3Rpb24gaW1hZ2VVc2VyKGl0ZW0pe1xyXG4gIGZvcm1BdmF0YXIuc2V0QnRuVGV4dCgn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKVxyXG4gIGNvbnN0IGFwaVVzZXI9YXBpQXZhdGFyLmF2YXRhclByb2ZpbGUoaXRlbS5saW5rKVxyXG4gIGNvbnNvbGUubG9nKGFwaVVzZXIpXHJcbiAgYXBpVXNlci50aGVuKChpdGVtKT0+e1xyXG4gICAgYnV0dG9uQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtpdGVtLmF2YXRhcn0pYDtcclxuICAgIGJ1dHRvbkF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gXCJuby1yZXBlYXRcIlxyXG4gIH0pLmNhdGNoKChlcnIpPT5jb25zb2xlLmxvZyhlcnIpKVxyXG4gIC5maW5hbGx5KGZvcm1BdmF0YXIuc2V0QnRuVGV4dCgn0KHQvtGF0YDQsNC90LjRgtGMJykpXHJcbn1cclxuLy9jb25zb2xlLmxvZyhkYXRhKVxyXG5cclxuLy9kZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuXHJcbmNvbnN0IHVzZXJQcm9maWxlID0gbmV3IFVzZXJJbmZvKHtcclxuICBzZWxlY3Rvck5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBzZWxlY3RvckpvYjogXCIucHJvZmlsZV9fc2Vjb25kLW5hbWVcIixcclxufSk7XHJcbi8vY29uc3QgZm9ybUNsb3NlPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2Nsb3NlXCIpXHJcblxyXG5jb25zdCBmb3JtUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfcHJvZmlsZVwiLHtcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaXRlbSkgPT4gdXNlclByb2ZpbGUuc2V0VXNlckluZm8oaXRlbSxhcGlQcm9maWxlKSxcclxufSk7XHJcblxyXG5cclxuXHJcbmNvbnN0IHBvcHVwUGhvdG9PcGVuID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmRVc2VyKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgIGFwaUxpa2VBZGQsIGFwaUxpa2VEbGV0ZSwgKCkgPT4ge1xyXG4gICAgLy9jb25zdCBwb3B1cFBob3RvT3Blbj1uZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX2ltYWdlJyxpdGVtLm5hbWUsaXRlbS5saW5rKVxyXG4gICAgcG9wdXBQaG90b09wZW4ub3BlblBvcHVwKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTtcclxuICB9KTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgbGV0IGNvdW50TGlrZXM9aXRlbS5saWtlcy5sZW5ndGhcclxuICBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGxhY2VfX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGV2dCk9PntcclxuICAgIGNvbnN0IGFwaUxpa2U9Y2FyZC50b2dnbGVMaWtlKClcclxuICAgICAgYXBpTGlrZS50aGVuKChyZXMpPT57XHJcbiAgICAgIGNvdW50TGlrZXM9Y2FyZC5jbGlja0xpa2UocmVzLGV2dCxjYXJkRWxlbWVudCxjb3VudExpa2VzKVxyXG4gICAgfSlcclxuICAgIFxyXG4gIH1cclxuICApIFxyXG4gIC8vY29uc3QgbGlua0Nsb3NlPWNhcmQubGlua0Nsb3NlKClcclxuICAvL2NvbnNvbGUubG9nKGxpbmtDbG9zZSkgXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkTXkoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCAgYXBpTGlrZUFkZCwgYXBpTGlrZURsZXRlLCAoKSA9PiB7XHJcbiAgICAvL2NvbnN0IHBvcHVwUGhvdG9PcGVuPW5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2UnLGl0ZW0ubmFtZSxpdGVtLmxpbmspXHJcbiAgICBwb3B1cFBob3RvT3Blbi5vcGVuUG9wdXAoaXRlbS5uYW1lLCBpdGVtLmxpbmspO1xyXG4gIH0pO1xyXG4gIFxyXG4gIGNvbnN0IGNhcmRFbGVtZW50PWNhcmQuZ2VuZXJhdGVDYXJkKClcclxuICBsZXQgY291bnRMaWtlcz1pdGVtLmxpa2VzLmxlbmd0aFxyXG4gIGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZV9fbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZXZ0KT0+e1xyXG4gICAgY29uc3QgYXBpTGlrZT1jYXJkLnRvZ2dsZUxpa2UoKVxyXG4gICAgICBhcGlMaWtlLnRoZW4oKHJlcyk9PntcclxuICAgICAgY291bnRMaWtlcz1jYXJkLmNsaWNrTGlrZShyZXMsZXZ0LGNhcmRFbGVtZW50LGNvdW50TGlrZXMpXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgfVxyXG4gICkgICAgICBcclxuICAgICAgICBcclxuICBjb25zdCBjYXJkQ2xvc2U9Y2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBsYWNlX19jbG9zZScpXHJcbiAgXHJcbiAgXHJcbiAgcmV0dXJuIFtjYXJkRWxlbWVudCxjYXJkQ2xvc2VdO1xyXG59XHJcbmJ0bk9wZW5FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIGNvbnN0IGluZm9PYmplY3QgPSB1c2VyUHJvZmlsZS5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IGluZm9PYmplY3QubmFtZTtcclxuICBqb2JJbnB1dC52YWx1ZSA9IGluZm9PYmplY3Quam9iO1xyXG4gIGZvcm1Qcm9maWxlLm9wZW5Qb3B1cCgpO1xyXG4gIHZhbGlkUHJvZmlsZS5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5cclxuLy9jbG9zZVBvcHVwKHBvcHVwQ2FyZFBob3RvKTtcclxuXHJcblxyXG5cclxuY29uc3QgZm9ybU1lc3RvID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9jYXJkXCIse1xyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiByZW5kZXJlckNhcmRQb3B1cChpdGVtKSxcclxufSk7XHJcbmNvbnN0IGZvcm1BdmF0YXI9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfYXZhdGFyXCIse1xyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiBpbWFnZVVzZXIoaXRlbSksXHJcbn0pO1xyXG5tZXN0b0J0bk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB2YWxpZE1lc3RvLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGZvcm1NZXN0by5vcGVuUG9wdXAoKTtcclxufSk7XHJcbmF2YXRhckJ0bk9wZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XHJcbiAgdmFsaWRBdmF0YXIucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZm9ybUF2YXRhci5vcGVuUG9wdXAoKVxyXG59KVxyXG5mb3JtTWVzdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG52YWxpZE1lc3RvLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZm9ybUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG52YWxpZEF2YXRhci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnZhbGlkUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL2FwcGVuZENhcmQoaW5pdGlhbENhcmRzKVxyXG5mb3JtUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbnBvcHVwUGhvdG9PcGVuLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiJdLCJuYW1lcyI6WyJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX3BvcHVwU2VsZWN0b3IiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwia2V5IiwidmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsb3NlUG9wdXAiLCJfdGhpcyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX3BvcHVwUGhvdG8iLCJfcG9wdXBQaG90b1N1YnRpdGxlIiwibmFtZSIsImxpbmsiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJmb3Jtc0NvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImRhdGEiLCJhcGlMaWtlQWRkIiwiYXBpTGlrZURsZXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2FwaUxpa2VEbGV0ZSIsIl9hcGlMaWtlQWRkIiwiX2RhdGEiLCJfbmFtZSIsIl9pbWFnZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJvd25lciIsIl9pZCIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2NhcmRJbWFnZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImxpa2VzIiwibGVuZ3RoIiwicmVuZGVyTGlrZSIsImlzTXlMaWtlIiwiY29uc29sZSIsImxvZyIsImkiLCJjYXJkRWxlbWVudCIsIl9pc015TGlrZSIsIml0ZW0iLCJjb3VudExpa2VzIiwiX2NvdW50TGlrZXMiLCJ0b2dnbGUiLCJjbGFzc05hbWUiLCJzcGxpdCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9mb3Jtc0NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J0blNhdmVFbGVtZW50IiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2Rpc2FibGVCdXR0b24iLCJmb3JFYWNoIiwiX2lucHV0VmFsaWQiLCJldmVyeSIsIl9yZWYiLCJfZW5hYmxlQnV0dG9uIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfdGhpczIiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJldmVyc2UiLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBTYXZlQnRuIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInJlc2V0IiwidGV4dCIsIl90aGlzMyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiX2Nsb3NlIiwiVXNlckluZm8iLCJzZWxlY3Rvck5hbWUiLCJzZWxlY3RvckpvYiIsIl9uYW1lUHJvZmlsZSIsIl9qb2JQcm9maWxlIiwiam9iIiwiYXBpIiwic2VuZERhdGFQcm9maWxlIiwiQXBpIiwiY29uZmlnIiwiX3VybCIsInVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJhdmF0YXIiLCJQb3B1cFdpdGhEZWxldGVDYXJkIiwiYnRuWWVzIiwiYXBpRGVsZXRlTXlDYXJkIiwiX2J0blllcyIsIl9hcGlEZWxldGVNeUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJfY2FyZElkIiwiX2RlbGV0ZUNhcmQiLCJidXR0b25BdmF0YXIiLCJnZXRFbGVtZW50QnlJZCIsInBvcHVwQXZhdGFyIiwiYXZhdGFyQnRuT3BlbiIsInBvcHVwTWVzdG8iLCJwb3B1cFByb2ZpbGUiLCJidG5PcGVuRWRpdFByb2ZpbGUiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImNhcmRzQ29udGFpbmVyIiwibWVzdG9CdG5PcGVuIiwidmFsaWRBdmF0YXIiLCJ2YWxpZE1lc3RvIiwidmFsaWRQcm9maWxlIiwiY2FyZFBvcHVwRGVsZXRlIiwiY2FyZElkIiwiYXV0aG9yaXphdGlvbiIsImRlbGV0ZUNhcmQiLCJhcGlQcm9maWxlIiwiYXBpQXZhdGFyIiwibGlrZUFkZCIsImxpa2VEZWxldGUiLCJ0YXNrcyIsImdldEFsbFRhc2tzIiwiZGVmYXVsdENhcmRMaXN0IiwiX2NyZWF0ZUNhcmRNeTIiLCJfc2xpY2VkVG9BcnJheSIsImNyZWF0ZUNhcmRNeSIsIm9wZW4iLCJzZXRJdGVtIiwiY2FyZCIsInBvcHVwUGhvdG9PcGVuIiwib3BlblBvcHVwIiwiZ2VuZXJhdGVDYXJkIiwidG9nZ2xlTGlrZSIsImNsaWNrTGlrZSIsImNyZWF0ZUNhcmRVc2VyIiwicmVuZGVySXRlbXMiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRSZXBlYXQiLCJ1c2VyUHJvZmlsZSIsImZvcm1Qcm9maWxlIiwic2V0VXNlckluZm8iLCJjYXJkQ2xvc2UiLCJpbmZvT2JqZWN0IiwiZ2V0VXNlckluZm8iLCJyZXNldFZhbGlkYXRpb24iLCJmb3JtTWVzdG8iLCJhcGlDYXJkIiwiY3JlYXRlTWVzdG9DYXJkIiwic2V0QnRuVGV4dCIsIl9jcmVhdGVDYXJkTXk0IiwiY2F0Y2giLCJlcnIiLCJmaW5hbGx5IiwicmVuZGVyZXJDYXJkUG9wdXAiLCJmb3JtQXZhdGFyIiwiYXBpVXNlciIsImF2YXRhclByb2ZpbGUiLCJpbWFnZVVzZXIiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9